{"ts":1349986506491,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1349986508312,"patch":[[{"diffs":[[1,"var http = require('http')\r\n  , ServerSent = require('./sse')\r\n  , tmpl, server, es, first\r\n\r\ntmpl  = require('fs').readFileSync(__dirname + '/index.html', 'utf8')\r\n\r\n\r\nserver = http.createServer(function (req, res){\r\n    res.setHeader('Content-Type','text/html')\r\n\tres.end(tmpl)\r\n}).listen(8080, function(){\r\n\tconsole.log('Server on 8080')\r\n})\r\n\r\n\r\n\r\n\r\n\r\nes = new ServerSent(server, { heartbeat: 1000*5 })\r\n\r\nfirst = es.of('/sse', { validate: function (req, next) {\r\n\t// validate Request, auth, params and whatnot\r\n\tnext()\r\n}})\r\n\r\nfirst.on('connection', function (socket){\r\n\tconsole.log('SOCKET', first.members)\r\n\tsocket.event('test')\r\n\tsocket.end('bienvenido')\r\n\tsocket.event('json')\r\n\tsocket.json({\r\n\t\ttime: +new Date\r\n\t})\r\n\tsetInterval(function(){\r\n\t\tif (!socket._isClosed) {\r\n\t\t\tprocess.stdout.write('.')\r\n\t\t\tsocket.event('test')\r\n\t\t\tsocket.end('hola')\r\n\t\t}\r\n\t},1500)\r\n})\r\n\r\n\r\nmodule.exports = server"]],"start1":0,"start2":0,"length1":0,"length2":905}]],"length":905,"saved":false}
{"ts":1349986522547,"patch":[[{"diffs":[[0,"quire('."],[-1,"/sse"],[1,"./lib"],[0,"')\r\n  , "]],"start1":47,"start2":47,"length1":20,"length2":21}]],"length":906,"saved":false}
