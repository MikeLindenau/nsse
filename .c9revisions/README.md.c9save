{"ts":1349986382771,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1349986389872,"patch":[[{"diffs":[[1,"# Server Sent Events for Node.js\r\n\r\n_With built in channels_\r\n\r\n\r\nSpec: [http://dev.w3.org/html5/eventsource/](http://dev.w3.org/html5/eventsource/)\r\n\r\n## Install\r\n\r\n`npm install nsse`\r\n\r\n## Usage\r\n\r\n```javascript\r\nvar ServerSent = require('nsse')\r\n   , http = require('http')\r\n   , os = require('os')\r\n\r\nvar server = http.createServer(function(req, res){\r\n    res.end('Server Sent Evetns')\r\n})\r\n\r\nserver.listen(8100)\r\n\r\n\r\nvar ss = new ServerSent(server, /* { heartbeat: 5*1000 } */) // default for 10 secs\r\n\r\nvar channel = ss.of('/sse') // like socket.io\r\n\r\nchannel.on('connection', function (socket){\r\n\tsocket.event('firstevnt')\r\n\tsocket.end('end of event')\r\n\r\n\tsocket.event('test')\r\n\tsocket.write('this is a test')\r\n\tsocket.json({\r\n\t\tserverDate: +new Date,\r\n\t\tloadavg: os.loadavg()\r\n\t})\r\n\r\n\tsocket.send('yetAnotherEvent', 'data for this event')\r\n\r\n\tsetInterval(function (){\r\n\t\tsocket.json({\r\n\t\t\tserverDate: +new Date,\r\n\t\t\tloadavg: os.loadavg()\r\n\t\t})\r\n\t}, 5000)\r\n})\r\n```\r\n\r\nClient:\r\n\r\n```html\r\n<html>\r\n\t<body>\r\n\t\t<h1> Server Sent Evetns</h1>\r\n\r\n\t\t<script type=\"text/javascript\">\r\n\t\tvar source = new EventSource('/sse')\r\n\r\n\t\tsource.addEventListener('firstevnt', function (ping){\r\n\t\t\tconsole.log('frst:', ping.data)\r\n\t\t})\r\n\r\n\t\tsource.addEventListener('test', function (ev){\r\n\t\t\tconsole.log('DATA:', JSON.parse(ev.data))\r\n\t\t})\r\n\r\n\t\tsource.addEventListener('heartbeat', function (ev){\r\n\t\t\tconsole.log('heartbeat ->', ev.data)\r\n\t\t})\r\n\r\n\t\t</script>\r\n\t</body>\r\n</html>\r\n```\r\n\r\n## Other libraries\r\n\r\n- [sse.js](https://github.com/einaros/sse.js) By Einar Otto Stangvik\r\n- [EventSource](https://github.com/aslakhellesoy/eventsource-node) By Aslak Helles√∏y\r\n\r\nFor the browser:\r\n\r\n-- [jQuery EventSource](https://github.com/rwldrn/jquery.eventsource) by Rick Waldron\r\n\r\n## License\r\n\r\nAlejandro Morales (c)\r\nMIT 2012 \r\n\r\n\r\n\r\n\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1817}]],"length":1817,"saved":false}
